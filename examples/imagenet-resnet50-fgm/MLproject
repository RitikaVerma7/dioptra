name: imagenet-resnet50-fgm

entry_points:
  fgm:
    parameters:
      data_dir: {type: path, default: "/nfs2/data/ImageNet-Kaggle-2017/images/ILSVRC/Data/CLS-LOC"}
      dataset_name: {type: string, default: "val-sorted-5000"}
      model: {type: string, default: "keras-model-imagenet-resnet50/1"}
      model_architecture: {type: string, default: "resnet50"}
      batch_size: {type: float, default: 20}
      eps: {type: float, default: 0.3}
      eps_step: {type: float, default: 0.1}
      minimal: {type: float, default: 0}
      norm: {type: string, default: "inf"}
      apply_defense: {type: string, default: "False"}
    command: >
      python src/fgm.py
      --data-dir {data_dir}
      --model {model}
      --model-architecture {model_architecture}
      --batch-size {batch_size}
      --eps {eps}
      --eps-step {eps_step}
      --minimal {minimal}
      --norm {norm}
      --apply-defense {apply_defense}

  train:
    parameters:
      data_dir: {type: path, default: "/nfs2/data/ImageNet-Kaggle-2017/images/ILSVRC/Data/CLS-LOC"}
      dataset_name: {type: string, default: "val-sorted-5000"}
    command: >
      python src/train.py
      --data-dir {data_dir}
