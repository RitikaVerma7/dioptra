name: mnist-model-inversion

entry_points:
  miface:
    parameters:
      data_dir: {type: path, default: "/nfs/data"}
      model: {type: string, default: "mnist_le_net/1"}
      model_architecture: {type: string, default: "le_net"}
      batch_size: {type: float, default: 32}
      max_iter: {type: int, default: 10000}
      window_length: {type: int, default: 100}
      threshold: {type: float, default: 0.99}
      learning_rate: {type: float, default: 0.1}
      seed: {type: float, default: -1}
    command: >
      python src/miface.py
      --data-dir {data_dir}
      --model {model}
      --model-architecture {model_architecture}
      --batch-size {batch_size}
      --max-iter {max_iter}
      --window-length {window_length}
      --threshold {threshold}
      --learning-rate {learning_rate}
      --seed {seed}

  train:
    parameters:
      data_dir: {type: path, default: "/nfs/data"}
      model_architecture: {type: string, default: "le_net"}
      epochs: {type: float, default: 30}
      batch_size: {type: float, default: 32}
      register_model: {type: string, default: "False"}
      learning_rate: {type: float, default: 0.001}
      optimizer: {type: string, default: "adam"}
      validation_split: {type: float, default: 0.2}
      seed: {type: float, default: -1}
    command: >
      python src/train.py
      --data-dir {data_dir}
      --model-architecture {model_architecture}
      --epochs {epochs}
      --batch-size {batch_size}
      --register-model {register_model}
      --learning-rate {learning_rate}
      --optimizer {optimizer}
      --validation-split {validation_split}
      --seed {seed}
